[supervisord]
nodaemon=true
logfile=/var/log/supervisor/supervisord.log
pidfile=/var/run/supervisord.pid
childlogdir=/var/log/supervisor

[program:nginx]
command=/usr/sbin/nginx -g "daemon off;"
autostart=true
autorestart=true
stdout_logfile=/var/log/supervisor/nginx.log
stderr_logfile=/var/log/supervisor/nginx.err
priority=10

[program:xvfb]
command=/usr/bin/Xvfb :0 -screen 0 %(ENV_RESOLUTION)s
autostart=true
autorestart=true
stdout_logfile=/var/log/supervisor/xvfb.log
stderr_logfile=/var/log/supervisor/xvfb.err
priority=100

[program:x11vnc]
command=/usr/bin/x11vnc -display :0 -forever -shared -rfbport 5900 %(ENV_VNC_PASSWORD:+-passwd)s %(ENV_VNC_PASSWORD)s
autostart=true
autorestart=true
stdout_logfile=/var/log/supervisor/x11vnc.log
stderr_logfile=/var/log/supervisor/x11vnc.err
priority=200

[program:websockify]
command=/usr/bin/websockify --web /usr/share/novnc 6081 localhost:5900
autostart=true
autorestart=true
stdout_logfile=/var/log/supervisor/websockify.log
stderr_logfile=/var/log/supervisor/websockify.err
priority=300

[program:chromium]
command=/usr/bin/chromium --no-sandbox --start-maximized --disable-gpu --disable-dev-shm-usage --remote-debugging-port=9222 --remote-debugging-address=0.0.0.0
environment=DISPLAY=:0
autostart=true
autorestart=true
user=root
stdout_logfile=/var/log/supervisor/chromium.log
stderr_logfile=/var/log/supervisor/chromium.err
priority=400

[program:lincoln]
command=python3 -m agents.lincoln.agent
directory=/app
environment=DISPLAY=:0,PYTHONPATH=/app
autostart=true
autorestart=true
stdout_logfile=/var/log/agents/lincoln.log
stderr_logfile=/var/log/agents/lincoln.err
priority=500

[program:shaun]
command=python3 -m agents.shaun.agent
directory=/app
environment=DISPLAY=:0,PYTHONPATH=/app
autostart=true
autorestart=true
stdout_logfile=/var/log/agents/shaun.log
stderr_logfile=/var/log/agents/shaun.err
priority=500

[group:agents]
programs=lincoln,shaun
priority=500 