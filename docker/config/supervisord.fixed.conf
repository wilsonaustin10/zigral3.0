[supervisord]
nodaemon=true
logfile=/dev/stdout
logfile_maxbytes=0
loglevel=debug
pidfile=/var/run/supervisord.pid
childlogdir=/var/log/supervisor
minfds=1024
minprocs=200
umask=022
strip_ansi=false
identifier=supervisor
directory=/tmp
nocleanup=true

[program:nginx]
command=/usr/sbin/nginx -g "daemon off;"
autostart=true
autorestart=true
stdout_logfile=/dev/fd/1
stdout_logfile_maxbytes=0
stderr_logfile=/dev/fd/2
stderr_logfile_maxbytes=0
startsecs=0
startretries=3
priority=10

[program:xvfb]
command=/usr/bin/Xvfb :0 -screen 0 %(ENV_RESOLUTION)s
autostart=true
autorestart=true
stdout_logfile=/dev/fd/1
stdout_logfile_maxbytes=0
stderr_logfile=/dev/fd/2
stderr_logfile_maxbytes=0
startsecs=0
startretries=3
priority=100

[program:x11vnc]
command=/usr/bin/x11vnc -display :0 -forever -shared -rfbport 5900
autostart=true
autorestart=true
stdout_logfile=/dev/fd/1
stdout_logfile_maxbytes=0
stderr_logfile=/dev/fd/2
stderr_logfile_maxbytes=0
startsecs=0
startretries=3
priority=200

[program:websockify]
command=/usr/bin/websockify --web /usr/share/novnc 6081 localhost:5900
autostart=true
autorestart=true
stdout_logfile=/dev/fd/1
stdout_logfile_maxbytes=0
stderr_logfile=/dev/fd/2
stderr_logfile_maxbytes=0
startsecs=0
startretries=3
priority=300

[program:chromium]
command=/usr/bin/chromium --no-sandbox --start-maximized --disable-gpu --disable-dev-shm-usage --remote-debugging-port=9222 --remote-debugging-address=0.0.0.0
environment=DISPLAY=:0
autostart=true
autorestart=true
user=root
stdout_logfile=/dev/fd/1
stdout_logfile_maxbytes=0
stderr_logfile=/dev/fd/2
stderr_logfile_maxbytes=0
startsecs=0
startretries=3
priority=400

[program:lincoln]
command=python3 -m agents.lincoln.agent
directory=/app
environment=DISPLAY=:0,PYTHONPATH=/app
autostart=true
autorestart=true
stdout_logfile=/dev/fd/1
stdout_logfile_maxbytes=0
stderr_logfile=/dev/fd/2
stderr_logfile_maxbytes=0
startsecs=0
startretries=3
priority=500

[program:shaun]
command=python3 -m agents.shaun.agent
directory=/app
environment=DISPLAY=:0,PYTHONPATH=/app
autostart=true
autorestart=true
stdout_logfile=/dev/fd/1
stdout_logfile_maxbytes=0
stderr_logfile=/dev/fd/2
stderr_logfile_maxbytes=0
startsecs=0
startretries=3
priority=500

[group:agents]
programs=lincoln,shaun
priority=500 